<!--room.wxml-->
<navigation-bar title="æˆ¿é—´" back="{{true}}" color="black" background="#FFF"></navigation-bar>

<view class="page-container">
  <!-- æˆå‘˜åˆ—è¡¨ - æ¨ªå‘æ»šåŠ¨ -->
  <view class="members-section">
    <view class="section-header">
      <view class="section-title">æˆ¿é—´æˆå‘˜</view>
      <view class="room-code-display" bindtap="copyRoomCode">
        <text class="room-code-label">æˆ¿é—´ID: {{roomCode}}</text>
        <text class="copy-icon">ğŸ“‹</text>
      </view>
    </view>
    <scroll-view class="members-scroll" scroll-x="true" enable-flex="true">
      <view class="members-list">
        <view class="member-item" wx:for="{{members}}" wx:key="id">
          <image class="member-avatar" src="https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0" mode="aspectFill"></image>
          <view class="member-name">{{item.username}}</view>
          <view class="member-balance {{item.balance >= 0 ? 'positive' : 'negative'}}">
            {{item.formattedBalance}}
          </view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æˆ¿é—´æ—¥å¿— - å æ»¡å‰©ä½™åŒºåŸŸ -->
  <view class="activities-section">
    <view class="section-title">æˆ¿é—´æ—¥å¿—</view>
    <scroll-view class="activities-scroll" scroll-y="true">
      <view class="activities-list">
        <view class="activity-item" wx:for="{{activities}}" wx:key="index">
          <view class="activity-time">{{item.formattedTime}}</view>
          <view class="activity-message">{{item.message}}</view>
        </view>
        <view class="empty-tip" wx:if="{{activities.length === 0}}">æš‚æ— æ—¥å¿—</view>
      </view>
    </scroll-view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="actions">
    <button class="btn-action btn-share" open-type="share">
      <text class="btn-icon">ğŸ“¤</text>
      <text class="btn-text">é‚€è¯·å¥½å‹</text>
    </button>
    <button class="btn-action btn-leave" bindtap="leaveRoom">
      <text class="btn-icon">ğŸšª</text>
      <text class="btn-text">ç¦»å¼€æˆ¿é—´</text>
    </button>
    <button class="btn-action btn-close" bindtap="closeRoom" wx:if="{{isOwner}}">
      <text class="btn-icon">ğŸ”’</text>
      <text class="btn-text">ç»“æŸæˆ¿é—´</text>
    </button>
  </view>
</view>

