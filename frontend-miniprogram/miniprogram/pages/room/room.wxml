<!--room.wxml-->
<navigation-bar title="æˆ¿é—´" back="{{true}}" color="black" background="#FFF"></navigation-bar>

<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- æˆ¿é—´ä¿¡æ¯ -->
    <view class="room-header" wx:if="{{roomInfo}}">
      <view class="room-title">{{roomInfo.name || 'æˆ¿é—´'}}</view>
      <view class="room-code">æˆ¿é—´ç ï¼š{{roomCode}}</view>
    </view>

    <!-- æˆå‘˜åˆ—è¡¨ -->
    <view class="section">
      <view class="section-title">æˆ¿é—´æˆå‘˜</view>
      <view class="members-list">
        <view class="member-item" wx:for="{{members}}" wx:key="id">
          <image class="member-avatar" src="https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0" mode="aspectFill"></image>
          <view class="member-info">
            <view class="member-name">{{item.username}}</view>
            <view class="member-balance {{item.balance >= 0 ? 'positive' : 'negative'}}">
              {{item.balance >= 0 ? '+' : ''}}{{item.balance.toFixed(2)}} å…ƒ
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- æˆ¿é—´æ—¥å¿— -->
    <view class="section">
      <view class="section-title">æˆ¿é—´æ—¥å¿—</view>
      <view class="activities-list">
        <view class="activity-item" wx:for="{{activities}}" wx:key="timestamp">
          <view class="activity-time">{{formatTime(item.timestamp)}}</view>
          <view class="activity-message">{{item.message}}</view>
        </view>
        <view class="empty-tip" wx:if="{{activities.length === 0}}">æš‚æ— æ—¥å¿—</view>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="actions">
      <button class="btn-action btn-share" open-type="share">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">é‚€è¯·å¥½å‹</text>
      </button>
      <button class="btn-action btn-leave" bindtap="leaveRoom">
        <text class="btn-icon">ğŸšª</text>
        <text class="btn-text">ç¦»å¼€æˆ¿é—´</text>
      </button>
      <button class="btn-action btn-close" bindtap="closeRoom" wx:if="{{isOwner}}">
        <text class="btn-icon">ğŸ”’</text>
        <text class="btn-text">ç»“æŸæˆ¿é—´</text>
      </button>
    </view>
  </view>
</scroll-view>

